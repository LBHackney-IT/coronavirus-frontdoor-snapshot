import VulnerabilitiesGridHelper from './vulnerabilityGridHelper';

describe('VulnerabilitiesGridHelper', () => {
  const helper = VulnerabilitiesGridHelper;

  it('find matches between two arrays', () => {
    let array1 = ['apple', 'banana', 'pear'];
    let array2 = ['orange', 'banana', 'pear'];
    expect(helper.findArrayMatches(array1, array2).length).toEqual(2);
    expect(helper.findArrayMatches(array1, []).length).toEqual(0);
    expect(helper.findArrayMatches(array1, array1).length).toEqual(3);
  });

  it('sorts the array of resources by matches and distance', () => {
    let array = [
      { matches: 1, distance: '0.3' },
      { matches: 2, distance: '2.5' },
      { matches: 2, distance: '0.9' }
    ];

    expect(helper.sortArrayByMatches(array)[0]).toEqual({ matches: 2, distance: '0.9' });
    expect(helper.sortArrayByMatches(array)[1]).toEqual({ matches: 2, distance: '2.5' });
    expect(helper.sortArrayByMatches(array)[2]).toEqual({ matches: 1, distance: '0.3' });
  });

  it('calculates distance when coordinates are provided', () => {
    const residentCoordinates = { lat: '51.5664', long: '-0.0994' };
    const resourceCoordinates = '51.5433, -0.0456';

    expect(helper.calculateResourceDistance(resourceCoordinates, residentCoordinates)).toEqual(
      '2.81'
    );
  });
});
